---
title: "【第2章】估值方法论：DCF、相对估值与实物期权"
description: "理解三种估值方法的逻辑基础：内在估值（DCF）寻找资产的'真实价值'，相对估值借助市场定价，期权估值捕捉不确定性中的价值。"
author: "Ying"
date: "2025-12-02"
lang: zh
categories: [金融, 投资, 估值]
tags: [Valuation, Damodaran, DCF, 相对估值, 实物期权]
format:
  html:
    toc: true
    toc-depth: 3
    number-sections: true
    html-math-method: mathjax
---

## 从一个问题开始

假设你手上有一家公司需要估值。你会怎么做？

你可能想到的第一个方法是：预测未来现金流，然后折现——这就是经典的 DCF（Discounted Cash Flow）方法。但你也可能听说过另一种做法：找几家类似的公司，看看它们的市盈率（P/E），然后套用到你的公司上。还有一种更"高级"的方法：把公司的某些资产看作期权来估值。

这三种方法听起来完全不同，但它们之间是什么关系？什么时候该用哪一种？它们会给出相同的答案吗？

本章将系统性地回答这些问题。我们会发现：三种方法并非完全独立，理解它们的逻辑基础和适用条件，比机械地套用公式重要得多。

---

## 三种估值方法：全景图

在具体讨论之前，让我们先建立一个全局视角。估值方法可以分为三大类：

| 方法 | 核心问题 | 核心逻辑 | 常见形式 |
|------|----------|----------|----------|
| **内在估值** | 资产本身值多少？ | 价值 = 未来现金流的现值 | DCF、股利折现模型 |
| **相对估值** | 市场给类似资产什么价？ | 比较同类资产的定价倍数 | P/E、EV/EBITDA、P/B |
| **期权估值** | 不确定性本身值多少？ | 价值 = 或有收益的期权价值 | Black-Scholes、二叉树 |

你可能会问：为什么需要三种方法？一种不够吗？

原因在于：不同的方法基于不同的假设，适用于不同的场景。更重要的是，理解 DCF 是理解其他方法的基础——相对估值的倍数最终可以追溯到 DCF 的逻辑，期权估值也常常需要先做一个 DCF 作为起点。

---

## 内在估值：DCF 的逻辑基础

### 现值法则：估值的第一性原理

内在估值（Intrinsic Valuation）的核心思想可以用一句话概括：

> **任何资产的价值，等于其预期未来现金流的现值。**

这不是一个"方法"，而是一个"定义"。无论资产是股票、债券、房产还是一个项目，只要它在未来能产生现金流，它就有价值，而这个价值等于：

$$
\text{资产价值} = \sum_{t=1}^{n} \frac{E(\text{现金流}_t)}{(1+r)^t}
$$

其中：

- $E(\text{现金流}_t)$ 是第 $t$ 期的预期现金流
- $r$ 是反映风险的折现率
- $n$ 是资产的寿命

这个公式的直觉是：**今天的一块钱比明天的一块钱更值钱**（时间价值），而且**确定的一块钱比不确定的一块钱更值钱**（风险溢价）。

### 理解"内在价值"

什么是内在价值（Intrinsic Value）？这是一个有点哲学意味的概念。

Damodaran 给出了一个务实的定义：内在价值是一个**无偏分析师**会给出的估值——这个分析师准确估计了公司的预期现金流，并使用了正确的折现率。

你可能会说：这听起来不可能做到啊！没错，估计内在价值本身就充满不确定性，尤其是对于年轻的、现金流难以预测的公司。但这不意味着我们应该放弃。为什么？

::: {.callout-important}
## 为什么要坚持估计内在价值？

**市场会犯错。** 虽然市场价格可能偏离内在价值，但我们期望两者最终会趋同。做内在估值的回报来自于：当市场纠正错误时，你已经站在了正确的一边。
:::

### DCF 模型的两条路径

在实际应用中，DCF 可以从两个角度进行：

**路径一：股权估值（Equity Valuation）**

只关注属于股东的现金流，用股权成本（Cost of Equity）折现：

$$
\text{股权价值} = \sum_{t=1}^{\infty} \frac{E(\text{股权现金流}_t)}{(1+k_e)^t}
$$

股权现金流是什么？是公司在支付所有费用、再投资需求、税款**和债务相关支出**之后，剩余给股东的现金。股利折现模型（Dividend Discount Model）是这种方法的特例。

**路径二：公司估值（Firm Valuation）**

关注整个公司的现金流（支付给所有资本提供者之前的现金流），用加权平均资本成本（WACC）折现：

$$
\text{公司价值} = \sum_{t=1}^{\infty} \frac{E(\text{公司现金流}_t)}{(1+k_c)^t}
$$

公司现金流是什么？是公司在支付运营费用、再投资需求和税款之后，**但在支付债务利息和本金之前**的现金流——也叫自由现金流（Free Cash Flow to Firm, FCFF）。

这两条路径的关系可以用下图理解：

```
┌─────────────────────────────────────────────────────────────┐
│                    公司价值 (Firm Value)                     │
│    现金流：税后、再投资后、债务支付前                         │
│    折现率：WACC（加权平均资本成本）                           │
├─────────────────────────────────────────────────────────────┤
│         债务价值              │         股权价值              │
│    (Debt Value)              │    (Equity Value)            │
│    = 公司价值 - 股权价值      │    = 公司价值 - 债务价值      │
└─────────────────────────────────────────────────────────────┘
```

### 一致性原则：不要混淆现金流和折现率

这里有一个非常重要的原则：**现金流和折现率必须匹配**。

::: {.callout-warning}
## 最常见的 DCF 错误

- **错误 1**：用 WACC 折现股权现金流 → 高估股权价值
- **错误 2**：用股权成本折现公司现金流 → 低估公司价值

这两个错误非常容易犯，因为它们的结果看起来"合理"，但实际上严重偏离了真实价值。
:::

让我们用一个具体的数值例子来说明。

### 案例：现金流与折现率的匹配

假设一家公司未来 5 年的现金流预测如下：

| 年份 | 股权现金流 | 税后利息 | 公司现金流 |
|------|-----------|---------|-----------|
| 1 | $50 | $40 | $90 |
| 2 | $60 | $40 | $100 |
| 3 | $68 | $40 | $108 |
| 4 | $76.20 | $40 | $116.20 |
| 5 | $83.49 | $40 | $123.49 |
| 终值 | $1,603 | — | $2,363 |

已知条件：

- 股权成本 $k_e = 13.625\%$
- 税前债务成本 = 10%，税率 = 50%，税后债务成本 = 5%
- 股权市值 = $1,073，债务市值 = $800

首先，计算 WACC：

$$
\text{WACC} = 13.625\% \times \frac{1073}{1873} + 5\% \times \frac{800}{1873} = 9.94\%
$$

**正确方法 1：股权现金流用股权成本折现**

$$
\text{股权价值} = \frac{50}{1.13625} + \frac{60}{1.13625^2} + \frac{68}{1.13625^3} + \frac{76.2}{1.13625^4} + \frac{83.49 + 1603}{1.13625^5} = \$1,073
$$

**正确方法 2：公司现金流用 WACC 折现**

$$
\text{公司价值} = \frac{90}{1.0994} + \frac{100}{1.0994^2} + \frac{108}{1.0994^3} + \frac{116.2}{1.0994^4} + \frac{123.49 + 2363}{1.0994^5} = \$1,873
$$

$$
\text{股权价值} = \$1,873 - \$800 = \$1,073
$$

两种方法得到的股权价值完全一致！

**错误示范 1：用 WACC 折现股权现金流**

$$
\text{"股权价值"} = \frac{50}{1.0994} + \cdots + \frac{83.49 + 1603}{1.0994^5} = \$1,248
$$

高估了 $175！

**错误示范 2：用股权成本折现公司现金流**

$$
\text{"公司价值"} = \frac{90}{1.13625} + \cdots + \frac{123.49 + 2363}{1.13625^5} = \$1,613
$$

$$
\text{"股权价值"} = \$1,613 - \$800 = \$813
$$

低估了 $260！

### 资本成本法 vs APV 法：如何处理债务的影响？

债务对公司价值有两个相反的影响：

- **正面**：利息可以抵税，降低税负（税盾效应）
- **负面**：债务增加破产风险

在**资本成本法**（Cost of Capital Approach）中，这些影响被整合到折现率里：

$$
\text{WACC} = k_e \times \frac{E}{D+E} + k_d \times (1-t) \times \frac{D}{D+E}
$$

如果税盾效应大于破产成本，更多债务会降低 WACC，从而提高公司价值。

在**调整现值法**（APV, Adjusted Present Value）中，我们把这些影响分开计算：

$$
\text{公司价值} = \text{全股权融资时的价值} + \text{税盾现值} - \text{破产成本现值}
$$

两种方法在假设一致时会给出相同的答案。APV 的优势在于它让债务的影响更加透明。

### 总现金流模型 vs 超额收益模型

还有一种重要的区分：

- **总现金流模型**：价值 = 所有现金流的现值
- **超额收益模型**：价值 = 投资成本 + 超额收益的现值

让我们用一个例子来说明。假设你投资 $100 百万，每年产生 $12 百万的税后现金流，资本成本是 10%。

**总现金流方法：**

$$
\text{价值} = \frac{\$12\text{百万}}{0.10} = \$120\text{百万}
$$

**超额收益方法：**

首先计算超额收益：

$$
\text{超额收益} = \$12\text{百万} - 0.10 \times \$100\text{百万} = \$2\text{百万}
$$

然后：

$$
\text{价值} = \frac{\$2\text{百万}}{0.10} + \$100\text{百万} = \$120\text{百万}
$$

结果完全相同！但超额收益模型有一个重要的教学意义：

::: {.callout-tip}
## 超额收益模型的洞察

**不是赚钱本身创造价值，而是赚取超过资本成本的收益才创造价值。**

如果一个项目的回报率刚好等于资本成本，它的价值就等于投入的资本，既不创造也不毁灭价值。
:::

### 一个简单的现金流测试

如何判断你在处理的是股权现金流还是公司现金流？

- 如果现金流是在**利息和本金支付之后**计算的 → 股权现金流 → 用股权成本折现
- 如果现金流是在**利息和本金支付之前**计算的 → 公司现金流 → 用 WACC 折现

更具体地说：

- 股权现金流通常从**净利润**开始（已扣除利息）
- 公司现金流通常从**营业利润**或 **EBIT** 开始（未扣除利息）

### DCF 的适用性和局限性

DCF 在以下情况下最容易应用：

- 公司有正的、可预测的现金流
- 有可靠的风险代理（如 beta）来估计折现率

但现实中很多公司不符合这个"理想状态"。让我们看看几种具有挑战性的情况：

**亏损公司（Money-Losing Firms）**

当公司持续亏损时，预测未来现金流变得困难，因为存在破产风险。即使公司能存活，也需要估计现金流何时转正。对于预期会失败的公司，DCF 会高估价值，因为它假设公司是持续经营的。

**周期性公司（Cyclical Firms）**

周期性公司的现金流随经济周期波动。在衰退期，它们看起来像困境公司。估值时通常需要"平滑"现金流预测，这就引入了分析师对经济周期的判断。

**拥有闲置资产的公司**

DCF 只反映产生现金流的资产的价值。如果公司有闲置的土地、设备或专利，这些资产的价值不会体现在 DCF 中。解决方法是单独估值这些资产，然后加到 DCF 结果上。

**拥有专利或产品期权的公司**

专利可能暂时不产生现金流，但它代表了一种"选择权"——在有利条件下可以开发利用。传统 DCF 会低估这类公司。这时需要用期权定价方法补充。

**正在重组的公司**

重组公司可能在出售资产、收购新业务、改变资本结构。历史数据变得不可靠。需要基于重组后的预期来估值。

**并购中的目标公司**

需要额外考虑两个因素：协同效应的价值，以及更换管理层带来的控制权价值。

**私有公司**

最大的挑战是风险衡量——大多数风险模型需要历史价格数据，而私有公司没有。解决方法包括：参考可比上市公司的风险，或使用基于会计变量的风险代理。

---

## 相对估值：市场怎么给类似资产定价？

### 定价的逻辑基础

相对估值（Relative Valuation）或称定价（Pricing），采用完全不同的思路：

> **资产的价值取决于市场如何给类似资产定价。**

具体做法是：找到一组可比资产，计算它们的定价倍数（如 P/E、EV/EBITDA），然后将这个倍数应用到目标资产上。

例如，如果软件行业的平均 P/E 是 24 倍，而你要估值的软件公司 EPS 是 $2，那么"价格"就是 $48。

### 相对估值的假设

相对估值依赖于一个关键假设：

> **市场平均而言是对的，但在个股定价上会犯错。**

这与 DCF 的假设不同。DCF 试图找到"真实"价值，而相对估值假设市场整体定价正确，只是个别股票可能偏离。

::: {.callout-note}
## 相对估值 vs DCF 的核心区别

- **DCF**：寻找内在价值，不依赖市场定价
- **相对估值**：依赖市场定价，假设偏差会被纠正

如果整个行业都被高估了 50%，相对估值不会发现这个问题，但 DCF 可能会。反过来，相对估值的支持者会说：行业内的定价错误更容易被发现和纠正。
:::

### 基于基本面 vs 基于可比公司

使用倍数有两种思路：

**基本面方法**

从 DCF 模型推导出倍数应该是多少。例如，对于稳定增长的公司：

$$
P/E = \frac{1-b}{k_e - g}
$$

其中 $b$ 是留存比率，$g$ 是增长率。这种方法让你能分析：如果增长率变化，P/E 应该如何变化？

**可比公司方法**

直接比较目标公司与同行的倍数。这种方法更常用，但需要回答一个关键问题：什么是"可比"？

真正可比的公司应该有相似的：

- 增长率
- 风险特征
- 现金流模式

由于很难找到完美的可比公司，实践中需要对差异进行调整。

### 横截面比较 vs 时间序列比较

**横截面比较**：将公司当前的倍数与同行业其他公司比较

例如，软件公司 A 的 P/E 是 10，而行业平均是 25。如果 A 与行业平均相似，它可能被低估了。但如果 A 的风险更高，较低的 P/E 可能是合理的。

**时间序列比较**：将公司当前的倍数与历史水平比较

例如，福特汽车现在的 P/E 是 6，而历史平均是 10。这是否意味着被低估？不一定——你需要假设公司的基本面没有发生根本性变化。对于福特来说，电动车的崛起可能已经永久改变了行业格局。

### 相对估值的优缺点

**优点：**

- 简单直观，易于沟通
- 可以快速获得估值
- 当有大量可比公司时特别有效
- 反映市场当前的定价水平

**缺点：**

- 容易被操纵（选择性地挑选可比公司）
- 会复制市场的错误（如果整个行业被高估）
- 对独特公司（没有真正的可比公司）难以应用
- 假设往往是隐含的，不像 DCF 那样透明

### 案例：可比公司选择的主观性

假设你要为一家软件公司 IPO 定价。下表是同行业公司的 P/E：

| 公司 | P/E |
|------|-----|
| Adobe Systems | 23.2 |
| Autodesk | 20.4 |
| Broderbund | 32.8 |
| Computer Associates | 18.0 |
| Lotus Development | 24.1 |
| Microsoft | 27.4 |
| Novell | 30.0 |
| Oracle | 37.8 |
| Software Publishing | 10.6 |
| System Software | 15.7 |
| **平均** | **24.0** |

看起来很客观，对吧？但是：

- 如果剔除两个最低 P/E 的公司（10.6 和 15.7），平均变成 **26.7**
- 如果剔除两个最高 P/E 的公司（32.8 和 37.8），平均变成 **21.2**

一个有偏见的分析师可以轻易地通过选择"可比公司"来得到他想要的结论。这就是为什么相对估值更容易被滥用。

---

## 或有索赔估值：不确定性本身有价值

### 期权思维的核心洞察

或有索赔估值（Contingent Claim Valuation）基于一个革命性的认识：

> **某些资产的价值可能大于其预期现金流的现值，因为它们的收益取决于某个事件是否发生。**

传统 DCF 会低估这类资产，因为它只考虑"平均"情况，而忽略了"选择权"的价值。

期权的本质是：在有利条件下你可以行动，在不利条件下你可以选择不行动。这种"下有底、上无顶"的收益结构本身就有价值。

### 期权的基本类型

**看涨期权（Call Option）**：当标的资产价值超过某个水平（行权价）时，期权持有者获得收益。

**看跌期权（Put Option）**：当标的资产价值低于行权价时，期权持有者获得收益。

```
        收益
          ↑
          │    看涨期权
          │         ╱
          │        ╱
          │       ╱
──────────┼──────●───────→ 标的资产价值
          │      行权价
          │
```

期权价值取决于：

- 标的资产的当前价值
- 标的资产价值的波动率
- 行权价
- 到期时间
- 无风险利率

### 金融期权 vs 实物期权

**金融期权**：标的是金融资产（股票、债券等）

- 股票期权
- 可赎回债券
- 认股权证

**实物期权（Real Options）**：标的是实物资产或项目

- 未开发的石油储备：开采权是一个看涨期权
- 专利：产品开发权是一个看涨期权
- 企业股权：可以看作对企业资产的看涨期权（债务面值是行权价）

### 实物期权的例子

想象巴西石油公司（Petrobras）拥有一块未开发的油田。

**DCF 方法**：基于当前油价预期，估计开发油田的 NPV。

但这忽略了一个关键点：Petrobras **有权选择**是否开发。如果油价上涨，它会开发；如果油价下跌，它可以等待甚至放弃。

**期权方法**：将油田看作一个看涨期权：

- 标的资产：开发后的油田价值
- 行权价：开发成本
- 到期时间：开发权的有效期
- 波动率：油价的波动率

期权方法会给出更高的价值，因为它捕捉了"等待并观望"这个选择权的价值。

### 期权估值的局限性

期权定价模型（如 Black-Scholes）最初是为短期金融期权开发的。将它们应用于长期实物期权时，会遇到几个问题：

- **波动率假设**：模型假设波动率恒定，但对于长期期权，这个假设难以成立
- **非交易标的**：实物资产通常不在市场上交易，难以获得价值和波动率的输入
- **行权条件复杂**：实物期权往往有复杂的行权条件，不像金融期权那样明确

因此，实物期权估值的结果往往比金融期权估值有更大的误差范围。

### 期权估值的适用场景

**直接应用**：

- LEAPS（长期股票期权）
- 或有价值权（CVRs）
- 认股权证

**扩展应用**：

- 股权估值：将股权看作对公司资产的看涨期权
- 专利估值：将专利看作开发产品的期权
- 自然资源公司：将未开发储备看作期权

---

## 三种方法的比较与选择

现在让我们把三种方法放在一起比较：

| 维度 | DCF | 相对估值 | 期权估值 |
|------|-----|----------|----------|
| **核心假设** | 价值 = 现金流现值 | 市场平均定价正确 | 选择权有价值 |
| **信息需求** | 现金流预测、折现率 | 可比公司数据 | 波动率、期权参数 |
| **主要输出** | 内在价值 | 相对价格 | 期权价值 |
| **优势** | 逻辑清晰、假设透明 | 简单、反映市场 | 捕捉不确定性价值 |
| **局限** | 输入估计困难 | 易被操纵、复制错误 | 模型假设严格 |
| **最适用于** | 成熟、稳定的公司 | 有大量可比公司 | 有明显期权特征的资产 |

### 方法之间的关系

三种方法并非完全独立：

- **相对估值的倍数可以从 DCF 推导**：P/E、EV/EBITDA 等倍数都有其 DCF 基础
- **期权估值常以 DCF 为起点**：例如，计算专利期权价值时，需要先估计产品的 DCF 价值作为标的资产价值
- **三种方法可以相互验证**：如果 DCF 和相对估值给出差异很大的结果，这是一个需要深入分析的信号

::: {.callout-tip}
## 实践建议

不要把估值方法当作"非此即彼"的选择。对于重要的估值，最好：

1. 先做 DCF 建立基础理解
2. 用相对估值检验 DCF 结果的合理性
3. 如果资产有明显的期权特征，补充期权分析
:::

---

## 总结

::: {.callout-important}
## 核心要点

- **DCF 是基础**：理解现金流折现的逻辑是理解所有估值方法的前提
- **现金流与折现率必须匹配**：股权现金流配股权成本，公司现金流配 WACC
- **相对估值依赖市场**：假设市场平均正确，但个股可能错价
- **期权估值捕捉选择权价值**：当资产有"下有底、上无顶"特征时特别有用
- **没有完美的方法**：每种方法有其适用场景和局限性
:::

本章我们回答了开头的问题：三种估值方法各有其逻辑基础，适用于不同场景。关键不是选择"最好"的方法，而是理解每种方法的假设和局限，然后根据具体情况灵活运用。

在接下来的章节中，我们会深入探讨每种方法的具体应用：如何估计现金流、如何确定折现率、如何选择可比公司、如何构建期权模型。但无论学习多么复杂的技术，都不要忘记本章建立的基础框架。

---

## 思考题

1. **现金流匹配测试**：如果你看到一份估值报告，使用 WACC 作为折现率，但现金流是从净利润开始计算的，你会有什么担忧？

2. **相对估值的陷阱**：假设你是一名分析师，老板希望你证明某公司被低估。你可以通过哪些方式"操纵"可比公司的选择来达到这个目的？这种做法有什么问题？

3. **期权思维的应用**：一家生物科技公司拥有一个处于临床试验阶段的药物。传统 DCF 可能低估这家公司的原因是什么？你会如何调整估值方法？

4. **方法选择**：对于以下公司，你会优先使用哪种估值方法？为什么？
   - 一家盈利稳定的消费品公司
   - 一家亏损的初创科技公司
   - 一家拥有大量未开发土地储备的房地产公司

5. **市场效率与估值**：如果市场完全有效，DCF 估值还有意义吗？相对估值呢？

---

[^source]: 本文为教学化改写与总结，主要依据 Aswath Damodaran《Investment Valuation》Chapter 2: Approaches to Valuation。
