---
title: "【第8章】估算风险参数与融资成本：从Beta到WACC"
description: "把风险转化为折现率的完整流程——Beta估算、杠杆调整、债务成本和加权平均资本成本(WACC)的计算。"
author: "Ying"
date: "2025-12-08"
categories: [估值, Beta, 资本成本, WACC, 债务成本]
image: "images/ch8-cost-of-capital.png"
number-sections: true
toc: true
toc-depth: 3
format:
  html:
    code-fold: true
    code-tools: true
---

## 从一个问题开始

上一章我们学会了如何估算无风险利率和股权风险溢价——这是所有公司共享的"市场层面"参数。但一个关键问题还没有回答：**同样是投资股票，为什么投资者对苹果要求10%的回报，对特斯拉却要求15%？**

答案就在于**公司层面的风险参数**：Beta。

更广泛地说，本章要回答的问题是：给定一家公司的业务特征、资本结构和信用状况，我们如何系统性地估算它的**股权成本**（Cost of Equity）、**债务成本**（Cost of Debt），并最终计算出**加权平均资本成本**（WACC）？

这不仅仅是一个技术问题。折现率的选择直接决定了估值结果——差1%的折现率，可能意味着估值差20%。本章将详细拆解这个看似简单、实则充满陷阱的计算过程。

::: {.callout-important}
## 本章的核心公式

$$
\text{股权成本} = R_f + \beta \times ERP
$$

$$
\text{债务成本} = (R_f + \text{违约利差}) \times (1 - \text{税率})
$$

$$
WACC = \frac{E}{V} \times R_e + \frac{D}{V} \times R_d \times (1-T)
$$

看起来简单，但每个参数的估算都有学问。
:::

## Beta：衡量公司相对于市场的风险

### 直觉：为什么需要Beta？

在CAPM模型中，投资者只关心**系统性风险**——无法通过分散化消除的风险。Beta就是衡量这种系统性风险的指标。

直观地理解：

- **Beta = 1**：股票与市场同涨同跌
- **Beta > 1**：股票波动比市场更剧烈（如科技股）
- **Beta < 1**：股票波动比市场更温和（如公用事业股）

但Beta到底怎么估算？有三种主要方法。

### 方法一：回归法（历史Beta）

最直观的方法是用历史数据做回归：

$$
R_{股票} = \alpha + \beta \times R_{市场} + \epsilon
$$

例如，用微软过去5年的月度收益率对标普500指数做回归，斜率就是Beta。

**微软2019-2023年的回归结果**

| 统计量 | 数值 | 含义 |
|--------|------|------|
| Beta（斜率） | 0.88 | 市场涨1%，微软平均涨0.88% |
| Alpha（截距） | 1.30% | 月度超额收益 |
| R² | 53.37% | 53%的波动来自市场风险 |
| 标准误 | 0.11 | Beta的不确定性 |

::: {.callout-warning}
## 回归Beta的三大问题

1. **标准误太大**：微软的Beta可能在0.66到1.10之间（95%置信区间），这个范围太宽了！
2. **历史不代表未来**：公司的业务结构、杠杆率都可能变化
3. **指数选择影响结果**：用S&P 500还是全球指数？日度还是月度数据？结果都不同

Damodaran的结论是：**回归Beta几乎总是太嘈杂或被估计选择扭曲**，不能单独依赖。
:::

### 服务商Beta与调整公式

大多数投资者不会自己跑回归，而是从数据服务商（Bloomberg、Value Line、Morningstar等）获取Beta。这些服务商的做法是：先估算回归Beta，然后**向1调整**。

Bloomberg的调整公式如下：

$$
\text{调整后Beta} = \text{原始Beta} \times 0.67 + 1.00 \times 0.33
$$

例如，微软的原始Beta是0.876，调整后：

$$
\text{调整后Beta} = 0.876 \times 0.67 + 1.00 \times 0.33 = 0.917
$$

::: {.callout-note}
## 为什么要向1调整？

背后的逻辑是**均值回归**（Mean Reversion）：实证研究表明，大多数公司的Beta会随时间向1靠拢。原因可能是：

- 公司变大后业务更多元化
- 客户群更稳定
- 经营模式更成熟

但Damodaran认为这种"一刀切"的调整过于武断——0.67和0.33的权重对所有股票都一样，没有考虑公司的具体特征。
:::

### Beta估算的三个关键选择

在设置回归时，有三个决策会显著影响结果：

**选择一：估计期间长度**

| 方法 | 典型期间 | 优点 | 缺点 |
|------|----------|------|------|
| Value Line/S&P | 5年 | 数据更多，精度更高 | 公司可能已经变了 |
| Bloomberg | 2年 | 更能反映近期特征 | 数据较少，噪音更大 |

**选择二：收益率频率**

| 频率 | 观测数量 | 主要问题 |
|------|----------|----------|
| 日度 | 最多 | **非交易偏差**（Non-trading Bias）——小公司可能多天不交易，导致Beta被低估 |
| 周度 | 中等 | 部分缓解非交易问题 |
| 月度 | 最少 | 非交易偏差最小，但观测点少 |

例如，微软用2年周度数据的Beta是0.82，用月度数据则是0.88——同一时期，不同结果！

**选择三：市场指数选择**

| 投资者类型 | 建议使用的指数 |
|------------|----------------|
| 美国本土投资者 | S&P 500 或 NYSE Composite |
| 国际/跨境投资者 | MSCI全球指数 |

微软相对于MSCI全球指数的Beta是0.846，略低于相对于S&P 500的0.88。

::: {.callout-important}
## 不同服务商为何给出不同Beta？

由于各服务商使用不同的：
- 估计期间
- 收益率频率
- 市场指数
- 调整方法

同一时点对同一家公司，你可能看到完全不同的Beta估计。好消息是，这些估计通常都在标准误的范围内。
:::

### 新兴市场公司的Beta估算

新兴市场的Beta估算面临三个特殊挑战：

1. **流动性问题**：许多股票交易不活跃，用日度或周度数据会产生严重的非交易偏差

2. **市场快速变化**：公司和市场本身都在短期内显著变化，5年的数据可能已经过时

3. **指数集中度问题**：许多新兴市场指数被少数大公司主导

**案例：Nokia与赫尔辛基指数（HEX）**

1990年代末，诺基亚占赫尔辛基指数市值的**75%**。当你对诺基亚跑回归时会发生什么？

| 统计量 | 数值 | 问题 |
|--------|------|------|
| Beta | 1.27 | 看起来很精确 |
| 标准误 | 0.03 | 异常地低！ |
| R² | 94% | 几乎完美拟合 |

这些数字看起来完美，但实际上是**诺基亚对自己的回归**！这个Beta对分散化投资者毫无意义。更糟的是，其他芬兰公司的Beta都会小于1——因为加权平均Beta必须等于1，而诺基亚（占75%）的Beta大于1。

**案例：Enka（土耳其建筑公司）**

Enka的Beta取决于你选择哪个指数：

| 指数 | Beta | 标准误 | R² |
|------|------|--------|-----|
| BIST 100（土耳其） | 0.69 | 0.11 | 28% |
| STXE 600（欧洲） | 0.29 | 0.30 | 0.9% |
| MSCI World（全球） | 0.30 | 0.24 | 1.4% |

如果Enka的边际投资者是欧洲分散化投资者，则应该使用欧洲指数的Beta；如果是全球分散化投资者，则应使用全球指数的Beta。

### 方法二：基本面Beta（自下而上法）

Damodaran更推荐的方法是**自下而上估算Beta**（Bottom-up Beta）。核心思路是：

> Beta由公司的基本面决定，而不是由股价波动决定。

**Beta的三个决定因素**：

1. **业务类型**：周期性行业（汽车、房地产）Beta高，非周期性行业（食品、公用事业）Beta低
2. **经营杠杆**：固定成本占比高的公司，收入波动会被放大，Beta更高
3. **财务杠杆**：负债越多，股东承担的风险越大，Beta越高

### 经营杠杆：被忽视的Beta决定因素

经营杠杆（Operating Leverage）反映了公司成本结构中固定成本与可变成本的关系。固定成本占比越高，经营杠杆越大，收入的小幅波动会被放大为利润的大幅波动。

**经营杠杆度的定义**：

$$
\text{经营杠杆度} = \frac{\text{营业利润变化百分比}}{\text{销售收入变化百分比}}
$$

例如，如果销售收入增长10%导致营业利润增长15%，经营杠杆度就是1.5。

**为什么经营杠杆会影响Beta？**

想象两家销售同类产品的公司：

- **A公司**：租用昂贵的自动化生产线，固定成本高，可变成本低
- **B公司**：大量使用外包和临时工，固定成本低，可变成本高

当经济繁荣时，两家公司销售都增长。但A公司的利润增长更快（因为边际收入几乎全部转化为利润）。当经济衰退时，A公司的利润下降也更快（因为固定成本无法削减）。

这种利润波动的放大效应会体现在股价中，导致高经营杠杆公司的Beta更高。

**从无杠杆Beta到业务Beta**

如果我们想剥离经营杠杆的影响，可以计算"业务Beta"（Business Beta）：

$$
\text{业务Beta} = \frac{\text{无杠杆Beta}}{1 + \frac{\text{固定成本}}{\text{可变成本}}}
$$

注意这个公式与财务杠杆公式的相似性——唯一的区别是没有税率调整，因为固定成本和可变成本都可以税前扣除。

::: {.callout-note}
## 案例：Vans Shoes的Beta估算

Vans Shoes是一家市值1.91亿美元的鞋类制造商。为了估算其自下而上Beta，我们收集了21家上市鞋类公司的数据：

| 统计量 | 行业中位数 | Vans Shoes |
|--------|------------|------------|
| Beta | 0.80 | — |
| 债务/股权比 | 40.51% | 9.41% |
| 固定/可变成本比 | 39.64% | 31.16% |

**第一步：不考虑经营杠杆差异**

行业无杠杆Beta = 0.80 / [1 + (1 - 0.40) × 0.4051] = 0.6435

Vans的有杠杆Beta = 0.6435 × [1 + (1 - 0.40) × 0.0941] = **0.68**

**第二步：调整经营杠杆差异**

行业业务Beta = 0.6435 / [1 + (1 - 0.40) × 0.3964] = 0.5199

Vans的无杠杆Beta = 0.5199 × (1 + 0.3116) = 0.682

Vans的有杠杆Beta = 0.682 × [1 + (1 - 0.40) × 0.0941] = **0.72**

由于Vans Shoes的财务杠杆和经营杠杆都低于行业中位数，其Beta显著低于行业平均水平。
:::

### 公司规模、增长与Beta

一般认为小公司比大公司风险更高。但为什么会体现在Beta（系统性风险）中呢？

**经营杠杆解释**：如果投资基础设施有固定成本或规模经济效应，小公司的固定成本占比会更高，导致Beta更高。

**产品属性解释**：高增长公司要实现增长，需要新客户采用产品或现有客户购买更多。这很大程度上取决于消费者的经济状况，使高增长公司的利润更依赖于经济周期，从而导致更高的Beta。

**核心公式：杠杆Beta与无杠杆Beta的关系**

$$
\beta_L = \beta_U \times [1 + (1-t) \times (D/E)]
$$

其中：

- $\beta_L$：有杠杆的Beta（Levered Beta），即股票的Beta
- $\beta_U$：无杠杆的Beta（Unlevered Beta），反映纯粹的业务风险
- $t$：边际税率
- $D/E$：债务股权比

::: {.callout-note}
## 为什么财务杠杆会放大Beta？

假设一家公司的资产Beta是1.0。如果全部用股权融资，股东承担所有风险，股票Beta = 1.0。

但如果50%用债务融资，债权人优先获得偿付，股东承担的风险就更集中了。用公式计算（假设税率25%）：

$$
\beta_L = 1.0 \times [1 + (1-0.25) \times 1.0] = 1.75
$$

股东的Beta从1.0跳到1.75！这就是杠杆效应。
:::

### 自下而上Beta的估算步骤

**步骤1：识别公司的业务组成**

例如，微软有两大业务：软件（Windows、Office）和智能云（Azure）。

**步骤2：找到每个业务的可比公司，计算行业无杠杆Beta**

| 业务 | 可比公司数量 | 行业平均Beta | 行业平均D/E | 无杠杆Beta |
|------|-------------|-------------|-------------|-----------|
| 软件 | 351家 | 1.50 | 18% | 1.27 |
| 云服务 | 12家 | 1.00 | 20% | 0.85 |

**步骤3：按业务价值加权，计算公司的无杠杆Beta**

假设软件业务占微软价值的67%，云业务占33%：

$$
\beta_U^{微软} = 1.27 \times 0.67 + 0.85 \times 0.33 = 1.13
$$

**步骤4：根据公司自己的杠杆率，计算有杠杆Beta**

微软的D/E比率约为3.17%，税率25%：

$$
\beta_L^{微软} = 1.13 \times [1 + (1-0.25) \times 0.0317] = 1.16
$$

::: {.callout-tip}
## 自下而上Beta的四大优势

1. **标准误更小**：平均了多家公司的Beta，误差相互抵消
2. **可以反映业务变化**：如果公司刚收购新业务，可以立即调整
3. **可以反映杠杆变化**：使用当前而非历史平均的D/E比率
4. **适用于非上市公司**：不需要股价历史数据

实务中，Damodaran强烈推荐使用自下而上Beta而非回归Beta。
:::

### 案例：微软收购动视暴雪后的Beta变化

2022年，微软宣布以700亿美元收购游戏公司动视暴雪。这会如何影响Beta？

**收购前**：

| 公司 | 无杠杆Beta | 企业价值 |
|------|-----------|----------|
| 微软 | 1.13 | $3.04万亿 |
| 动视暴雪 | 0.87 | $522亿 |

**收购后的加权无杠杆Beta**：

$$
\beta_U^{合并} = 1.13 \times \frac{3.04}{3.09} + 0.87 \times \frac{0.052}{3.09} = 1.126
$$

由于微软的市值远大于动视暴雪，收购对Beta的影响很小。但如果微软收购的是市值相近的英伟达（约2万亿美元），Beta变化就会显著得多。

### 会计Beta：没有市场数据时的替代方案

当公司没有上市交易历史时，除了自下而上Beta，还有第三种方法：**会计Beta**（Accounting Beta）。这种方法用会计盈利的变化来代替股价收益率，将公司盈利变化与市场盈利变化进行回归，得到Beta估计值。

**基本思路**：

$$
\Delta \text{盈利}_{公司} = \alpha + \beta_{会计} \times \Delta \text{盈利}_{市场}
$$

其中盈利变化可以按季度或年度计算。

**会计Beta的三大缺陷**：

1. **盈利平滑效应**：会计师倾向于将收入和费用在多个期间分摊，导致会计盈利相对于真实价值波动更小。结果是：风险高的公司Beta被低估，风险低的公司Beta被高估——所有公司的Beta都会向1靠拢。

2. **非经营因素干扰**：会计盈利可能受到折旧方法变更、存货计价方法变更、公司费用分摊方式等非经营因素的影响。

3. **观测值太少**：会计盈利最多每季度报告一次，通常只有年度数据。这导致回归分析的观测值很少，解释力弱（低R²、高标准误）。

::: {.callout-note}
## 案例：Boeing国防部门的会计Beta（1995年）

Boeing是一家航空航天公司，拥有大量国防业务。由于国防部门运营了数十年，积累了详细的盈利记录。下表显示了1980-1994年Boeing国防部门与S&P 500的盈利变化：

| 年份 | S&P 500 | Boeing国防部门 |
|------|---------|---------------|
| 1980 | -2.10% | -12.70% |
| 1981 | -6.70% | -35.56% |
| 1982 | -45.50% | 27.59% |
| 1983 | 37.00% | 159.36% |
| 1984 | 41.80% | 13.11% |
| 1985 | -11.80% | -26.81% |
| 1986 | 7.00% | -16.83% |
| 1987 | 41.50% | 20.24% |
| 1988 | 41.80% | 18.81% |
| 1989 | 2.60% | -29.70% |
| 1990 | -18.00% | -40.00% |
| 1991 | -47.40% | -35.00% |
| 1992 | 64.50% | 10.00% |
| 1993 | 20.00% | -7.00% |
| 1994 | 25.30% | 11.00% |

对这些数据进行回归分析：

$$
\Delta \text{盈利}_{国防} = -0.03 + 0.65 \times \Delta \text{盈利}_{S\&P 500} \quad R^2 = 19.01\%
$$

标准误：截距 (0.12)，斜率 (0.37)

回归得出的Beta为0.65，但标准误高达0.37。这意味着以67%置信度，真实Beta可能在0.28到1.02之间——范围如此之大，这个估计几乎没有实用价值。
:::

### 三种Beta方法的选择

| 方法 | 优点 | 缺点 | 适用场景 |
|------|------|------|----------|
| **回归Beta** | 直接、简单 | 标准误大、受指数影响、无法反映业务变化 | 很少使用 |
| **自下而上Beta** | 标准误小、可反映业务变化、适用于非上市公司 | 需要识别可比公司 | **首选方法** |
| **会计Beta** | 不需要股价数据 | 盈利平滑、观测值少、解释力弱 | 作为最后手段 |

Damodaran强烈推荐自下而上Beta，原因有三：

1. **允许反映业务和财务结构变化**：即使变化尚未发生
2. **标准误更小**：通过平均多家公司的Beta，误差相互抵消
3. **可分解业务Beta**：对投资分析和估值都有价值

### Lambda（λ）：衡量国家风险暴露度

在前面讨论ERP时，我们提到可以用**加权平均法**处理多国经营公司的国家风险——根据收入来源地加权各国的ERP。但这里有一个隐含假设：**公司对国家风险的暴露程度与其收入来源成正比**。

这个假设并不总是成立。有些公司虽然在某国只有少量收入，但对该国风险高度敏感（比如原材料供应依赖）；有些公司虽然在某国收入占比高，但通过多元化等手段降低了风险暴露。

为了更精确地衡量公司对特定国家风险的暴露度，我们引入**Lambda（λ）**这个概念。

#### Lambda的定义

Lambda衡量的是：**相对于市场平均水平，一家公司对特定国家风险的暴露程度**。

$$
\lambda = \frac{\text{公司在该国的收入占比}}{\text{市场平均公司在该国的收入占比}}
$$

- λ = 1：公司的国家风险暴露与市场平均水平相同
- λ > 1：公司对该国风险的暴露高于平均水平
- λ < 1：公司对该国风险的暴露低于平均水平

加入Lambda后，股权成本公式变为：

$$
\text{股权成本} = R_f + \beta \times ERP_{\text{成熟市场}} + \lambda \times \text{国家风险溢价}
$$

#### 估算Lambda的两种方法

**方法一：收入分解法**

最直接的方法是比较公司与市场平均的收入地理分布：

$$
\lambda = \frac{\text{公司在新兴市场的收入占比}}{\text{市场指数中公司在新兴市场的平均收入占比}}
$$

::: {.callout-note}
## Embraer案例：收入分解法

Embraer是巴西航空工业公司，主要生产商用和公务飞机。

**收入地理分布**：
- 巴西收入占比：3%
- 其他国家收入占比：97%

**S&P 500平均水平**：
- 新兴市场收入占比约20%

因此，Embraer的Lambda为：

$$
\lambda = \frac{3\%}{20\%} = 0.15
$$

这意味着虽然Embraer是巴西公司，但由于其客户主要在发达国家（航空公司），它对巴西国家风险的暴露实际上**远低于**一般的巴西公司。
:::

**方法二：回归分析法**

另一种方法是将公司股票收益率对国家债券收益率进行回归：

$$
R_{\text{股票}} = a + \lambda \times R_{\text{国家债券}}
$$

回归的斜率系数就是Lambda，它直接衡量公司股票对国家风险的敏感度。

::: {.callout-note}
## Embraer案例：回归分析法

用Embraer的股票收益率对巴西政府债券收益率回归：

$$
R_{Embraer} = 0.0195 + 0.2681 \times R_{\text{巴西债券}}
$$

得到λ = 0.27，略高于收入分解法的0.15。

**两个估计值为什么不同？**

- 收入分解法（λ = 0.15）：只看收入来源
- 回归法（λ = 0.27）：还捕捉了其他风险渠道（如汇率波动、政治风险感知等）

在实践中，可以取两者的平均值，或根据具体情况选择更合理的估计。
:::

#### Lambda估算值得花精力吗？

::: {.callout-tip}
## 何时需要估算Lambda

并非所有情况都需要精确估算Lambda。以下两种情况值得花精力：

**1. 公司在单一高风险国家有重大敞口**

如果一家公司的收入高度集中于某个风险较高的新兴市场，精确估算其国家风险暴露就很重要。相反，如果公司业务分散在多个国家，分散效应会降低估算Lambda的必要性。

**2. 公司对国家风险有特殊暴露**

有些公司的业务性质使其对国家风险特别敏感。例如：
- 依赖当地基础设施的公司
- 需要政府许可或合同的公司
- 原材料来源集中的公司

对于这类公司，即使收入分布显示低暴露，实际风险暴露可能更高，需要仔细评估。

**实践建议**：对于大多数跨国公司，使用收入加权的ERP已经足够。Lambda分析主要用于那些有明显"非对称"国家风险暴露的公司。
:::

## 从Beta到股权成本

有了Beta，计算股权成本就很直接了：

$$
\text{股权成本} = R_f + \beta \times ERP
$$

**微软的股权成本（2024年4月）**：

| 参数 | 数值 | 来源 |
|------|------|------|
| 无风险利率 | 4.50% | 10年期美国国债 |
| Beta | 1.16 | 自下而上估算 |
| ERP | 5.50% | 基于收入地理分布加权 |
| **股权成本** | **10.89%** | 4.5% + 1.16 × 5.5% |

::: {.callout-note}
## 关于小公司溢价的争议

有人认为小公司的Beta被低估了，应该在股权成本上加一个"小公司溢价"（通常3%左右）。

Damodaran**反对**这种做法，理由是：
1. 如果我们的目标是发现市场错误定价，不应该一开始就假设市场是对的
2. 更好的做法是找出小公司风险更高的原因（如经营杠杆更高），然后直接调整Beta
3. 小公司溢价的标准误很大（约2%），可能根本不显著
4. 近几十年这个溢价已经消失了

因此，我们不建议在股权成本计算中加入小公司溢价。
:::

## 债务成本：违约风险的定价

### 债务成本的构成

债务成本比股权成本简单，因为它可以直接观察到（公司借钱的利率）。但我们关心的是**边际债务成本**——如果今天去借钱，利率是多少？

$$
\text{税前债务成本} = R_f + \text{违约利差}
$$

$$
\text{税后债务成本} = (R_f + \text{违约利差}) \times (1 - \text{税率})
$$

利息可以抵税，这是债务相对于股权的一个优势。

### 如何估算违约利差？

**情况1：公司有评级和交易中的债券**

直接用债券的到期收益率减去无风险利率。

**情况2：公司有评级但债券不活跃**

用评级对应的典型违约利差：

| 评级（标普） | 典型违约利差（2024年） |
|-------------|----------------------|
| AAA | 0.59% |
| AA | 0.70% |
| A | 1.07% |
| BBB | 1.47% |
| BB | 2.21% |
| B | 3.61% |
| CCC | 8.51% |

**情况3：公司没有评级**

用**合成评级**（Synthetic Rating）。最简单的方法是基于利息覆盖率：

$$
\text{利息覆盖率} = \frac{EBIT}{\text{利息费用}}
$$

| 利息覆盖率（大公司） | 合成评级 | 违约利差 |
|---------------------|----------|---------|
| > 8.5 | AAA | 0.59% |
| 6.5-8.5 | AA | 0.70% |
| 5.5-6.5 | A+ | 0.92% |
| 4.25-5.5 | A | 1.07% |
| 3.0-4.25 | A- | 1.21% |
| 2.5-3.0 | BBB | 1.47% |
| 2.25-2.5 | BB+ | 1.74% |
| 2.0-2.25 | BB | 2.21% |
| 1.75-2.0 | B+ | 3.14% |
| 1.5-1.75 | B | 3.61% |
| 1.25-1.5 | B- | 5.24% |
| < 1.25 | CCC及以下 | 8.51%+ |

::: {.callout-warning}
## 税收抵扣的前提条件

利息只有在公司有足够的应税收入时才能抵税。

如果一家公司持续亏损，它当年无法享受利息抵税的好处。在这种情况下，**税后债务成本 = 税前债务成本**。

只有当你预期公司未来会盈利时，才应该在未来年份的WACC中考虑税收抵扣。
:::

### 案例：微软的债务成本

微软的信用评级是AAA（最高级别），违约利差约0.59%：

$$
\text{税前债务成本} = 4.5\% + 0.59\% = 5.09\%
$$

$$
\text{税后债务成本} = 5.09\% \times (1 - 0.25) = 3.82\%
$$

### 新兴市场公司的债务成本

对于新兴市场公司，债务成本还需要考虑**国家违约利差**：

$$
\text{债务成本} = R_f + \text{国家违约利差} + \text{公司违约利差}
$$

例如，巴西航空工业公司（Embraer）的债务成本：

- 美国国债利率：3.8%
- 巴西主权违约利差：2.0%
- 公司违约利差（BBB评级）：1.5%
- 税前债务成本：3.8% + 2.0% + 1.5% = **7.3%**
- 税后债务成本（税率34%）：7.3% × (1-0.34) = **4.82%**

## 混合证券的融资成本

在股权和债务之间，还存在一类**混合证券（Hybrid Securities）**——它们同时具有债务和股权的特征。最常见的两种是**优先股（Preferred Stock）**和**可转换债券（Convertible Bonds）**。

### 优先股成本

优先股是一种承诺支付固定股息的证券。与普通股不同，优先股股息通常是固定的；与债务不同，优先股股息不能税前扣除，且公司可以选择不支付（虽然会有累积条款）。

优先股的成本计算相对直接：

$$
k_{ps} = \frac{\text{优先股股息}}{\text{优先股市场价格}}
$$

::: {.callout-note}
## 为什么优先股成本介于债务和股权之间？

从风险角度看：
- 优先股在清算时优先于普通股 → 风险低于普通股
- 优先股在清算时劣后于债务 → 风险高于债务
- 因此：$k_d < k_{ps} < k_e$

从税收角度看：
- 债务利息可以税前扣除
- 优先股股息**不能**税前扣除
- 这使得优先股的税后成本更高
:::

**案例：Ford 汽车的优先股成本（2011年）**

Ford 在 2011 年有一只优先股：
- 每股年股息：$1.875
- 市场价格：$26.475

优先股成本：

$$
k_{ps} = \frac{\$1.875}{\$26.475} = 7.08\%
$$

这个 7.08% 的成本介于 Ford 当时的税后债务成本（约 4-5%）和股权成本（约 10-12%）之间，符合我们对混合证券风险特征的预期。

### 可转换债券的处理

可转换债券（Convertible Bonds）是一种更复杂的混合证券：持有人既享有固定的票息收入，又拥有在特定条件下将债券转换为股票的**期权**。

这种双重特性意味着可转换债券实际上是两种证券的组合：

$$
\text{可转债价值} = \text{普通债券价值} + \text{转换期权价值}
$$

在估算融资成本时，我们需要将可转债**分解**为债务和股权两个部分：

1. **普通债券部分**：以公司的信用评级计算一个假设的"纯债券"价值
2. **转换期权部分**：可转债市价减去普通债券价值的差额

**案例：MGM Resorts 的可转债分解（2011年）**

MGM Resorts 在 2011 年有一只可转债：
- 票面利率：4.25%
- 到期日：2015 年 4 月
- 公司信用评级：CCC+（高风险）
- CCC 评级公司的债务利率：约 12.5%
- 可转债市场价格（每 $1,000 面值）：$1,120

**步骤一：计算普通债券价值**

如果这是一只没有转换权的普通债券（4.25% 票息，按 12.5% 折现）：

$$
\text{普通债券价值} = \sum_{t=1}^{4} \frac{\$42.5}{(1.125)^t} + \frac{\$1000}{(1.125)^4} \approx \$818
$$

**步骤二：分离转换期权价值**

$$
\text{转换期权价值} = \$1,120 - \$818 = \$302
$$

**步骤三：在 WACC 中的处理**

- 将 **$818** 作为债务处理，使用公司的债务成本（12.5%）
- 将 **$302** 作为股权处理，使用公司的股权成本

::: {.callout-warning}
## 可转债的常见误区

**错误做法**：直接用可转债的票面利率（4.25%）作为债务成本

**问题**：4.25% 的低利率正是因为投资者获得了转换期权作为补偿。如果忽略期权价值，会严重低估公司的真实融资成本。

**正确做法**：分解后，债务部分按市场利率（12.5%）计算，期权部分按股权成本计算。
:::

### 混合证券的权重处理

在计算 WACC 时，混合证券有两种处理方式：

| 方法 | 处理方式 | 适用情况 |
|------|----------|----------|
| **分解法** | 将混合证券分解为债务和股权两部分 | 可转债等复杂证券 |
| **独立法** | 作为第三类融资，使用独立的成本和权重 | 优先股 |

如果采用独立法处理优先股，WACC 公式扩展为：

$$
WACC = \frac{E}{V} \times k_e + \frac{D}{V} \times k_d \times (1-T) + \frac{PS}{V} \times k_{ps}
$$

其中 $PS$ 是优先股的市场价值，$V = E + D + PS$。

## 计算WACC：把所有部分组合在一起

### WACC公式

$$
WACC = \frac{E}{E+D} \times R_e + \frac{D}{E+D} \times R_d \times (1-T)
$$

其中：

- $E$：股权的**市场价值**
- $D$：债务的**市场价值**
- $R_e$：股权成本
- $R_d$：税前债务成本
- $T$：边际税率

### 关键问题一：什么算"债务"？

不是所有负债都算债务。我们只考虑**有息负债**：

✅ 包括：
- 短期借款
- 长期借款
- 债券
- 经营租赁（2019年后会计准则要求资本化）

❌ 不包括：
- 应付账款
- 应付工资
- 递延收入

::: {.callout-note}
## 经营租赁的处理

2019年之前，经营租赁被当作经营费用处理，不体现在资产负债表上。但从估值角度看，一份12年的租约和一笔12年的贷款没有本质区别——都是固定的未来支付义务。

2019年后，GAAP和IFRS都要求将租赁资本化，作为债务处理。但如果你分析的公司还没有采用新准则，需要手动将经营租赁折现成债务：

$$
\text{经营租赁的债务价值} = \sum_{t=1}^{n} \frac{\text{租赁支付}_t}{(1+r_d)^t}
$$

例如，微软2000年的经营租赁折现后约5.56亿美元，应加到债务总额中。
:::

### 关键问题二：用账面价值还是市场价值？

**必须用市场价值**。原因是：

1. **资本成本衡量的是今天融资的成本**：如果你今天发行股票或债券，是按市场价格发行的
2. **账面价值反映历史，市场价值反映现实**：一家公司的真实价值随时在变化，账面价值无法捕捉这种变化
3. **用账面价值不一定更保守**：有时账面负债率高于市场负债率，用账面值计算的WACC反而更低！

**如何估算债务的市场价值？**

大多数债务不像股票那样交易。一个近似方法是把全部债务当作一张债券来估值：

$$
\text{债务市场价值} = \frac{\text{利息费用}}{r_d} \times \left(1 - \frac{1}{(1+r_d)^n}\right) + \frac{\text{债务账面价值}}{(1+r_d)^n}
$$

其中 $r_d$ 是当前债务成本，$n$ 是债务的平均剩余期限。

### 案例：微软的WACC（2024年4月）

让我们把所有参数汇总起来：

**股权成本**：
- 无风险利率：4.50%
- Beta：1.16
- ERP：5.50%
- 股权成本：4.50% + 1.16 × 5.50% = **10.89%**

**债务成本**：
- 评级：AAA
- 税前债务成本：5.09%
- 税率：25%
- 税后债务成本：**3.82%**

**资本结构**（市场价值）：

| 项目 | 市场价值 | 权重 |
|------|----------|------|
| 股权 | $3.023万亿 | 96.93% |
| 债务 | $958亿 | 3.07% |
| 总计 | $3.119万亿 | 100% |

**WACC计算**：

$$
WACC = 10.89\% \times 0.9693 + 3.82\% \times 0.0307 = \textbf{10.65\%}
$$

::: {.callout-important}
## 微软的WACC为什么接近股权成本？

因为微软几乎没有债务！债务只占资本结构的3%，所以债务成本对WACC的影响很小。

相比之下，一家债务占50%的公司，其WACC会显著低于股权成本（因为债务成本低于股权成本，且利息可以抵税）。

这也解释了为什么有些公司会主动增加负债——适度的杠杆可以降低WACC，提高公司价值。但杠杆过高会增加破产风险，推高债务成本，反而得不偿失。
:::

### 案例：新兴市场公司的WACC（Embraer）

Embraer是巴西的航空制造商，我们来计算它的美元WACC：

**股权成本**：

- 无风险利率：3.8%
- 无杠杆Beta：0.75（航空航天行业）
- D/E比率：26.84%
- 有杠杆Beta：0.75 × [1 + (1-0.34) × 0.2684] = 0.88
- 成熟市场ERP：4.0%
- 巴西国家风险溢价：3.66%
- 股权成本：3.8% + 0.88 × (4.0% + 3.66%) = **10.54%**

**债务成本**：

- 合成评级：BBB（利息覆盖率2.99）
- 税后债务成本：**4.82%**（见前文计算）

**资本结构**（市场价值，百万BR）：

| 项目 | 市场价值 | 权重 |
|------|----------|------|
| 股权 | 12,729 | 81.36% |
| 债务 | 2,915 | 18.64% |
| 总计 | 15,644 | 100% |

**WACC计算**：

$$
WACC_{USD} = 10.54\% \times 0.8136 + 4.82\% \times 0.1864 = \textbf{9.48\%}
$$

如果要转换成巴西雷亚尔的名义WACC（假设巴西通胀6%，美国通胀2%）：

$$
WACC_{BRL} = (1 + 0.0948) \times \frac{1.06}{1.02} - 1 = \textbf{13.82\%}
$$

## 净债务与总债务的处理

在计算债务比率时，实务中有两种做法：

1. **总债务法（Gross Debt）**：使用公司的全部债务总额
2. **净债务法（Net Debt）**：总债务 - 现金余额

例如，一家公司有12.5亿美元的有息债务和10亿美元现金，则：

- 总债务 = 12.5亿美元
- 净债务 = 12.5亿 - 10亿 = **2.5亿美元**

净债务法在拉丁美洲和欧洲尤为普遍，债务比率通常基于净债务计算。

### Damodaran的建议：优先使用总债务法

一般而言，基于**总债务**进行估值更为稳妥：

- 在计算WACC时，全部债务的利息支付都享有税盾
- 可以单独评估公司是否有效运用了现金余额
- 然后将现金余额加回到经营资产价值，得出公司总价值

### 使用净债务法的一致性要求

如果选择使用净债务法，**必须**在整个估值过程中保持一致：

1. **Beta计算**：用净债务/股权比率（而非总债务比率）计算有杠杆Beta
2. **WACC权重**：债务的市场价值权重基于净债务
3. **最终估值**：折现后**不再加回现金**——因为现金已经在净债务中被扣除了

::: {.callout-warning}
## 净债务法的隐含假设与风险

净债务法的核心假设是：**现金和债务具有相似的风险**。

这个假设对于**高评级公司**（如AAA/AA级）可能成立，但对于**高风险公司**就站不住脚了：

- BB级公司的债务风险远高于其现金余额的风险
- 将现金与债务简单对冲，会**误导性地降低**公司的违约风险评估
- **结论**：使用净债务比率会**高估高风险公司的价值**

因此，除非有特殊原因，建议使用总债务法。
:::

### 案例对比：Embraer的WACC（总债务法 vs 净债务法）

前文我们用总债务法计算了Embraer的WACC为9.48%。现在让我们用净债务法重新计算，看看两种方法的差异。

**净债务计算**：

Embraer当时持有4,437百万BR的现金：

$$
\text{净债务} = 2,915 - 4,437 = -1,422 \text{ 百万BR}
$$

净债务为**负数**，意味着现金超过债务。

**净债务比率**：

$$
\frac{\text{净债务}}{\text{股权}} = \frac{-1,422}{12,729} = -11.17\%
$$

$$
\frac{\text{净债务}}{\text{资本}} = \frac{-1,422}{12,729 - 1,422} = -12.57\%
$$

**用净债务比率计算有杠杆Beta**：

$$
\beta_L = 0.75 \times [1 + (1-0.34) \times (-0.1117)] = 0.695
$$

注意：由于净债务为负，有杠杆Beta反而**低于**无杠杆Beta（0.695 < 0.75）。直觉上，这反映了现金被纳入Beta计算，而现金是无风险的（Beta = 0）。

**股权成本（美元）**：

$$
k_e = 3.8\% + 0.695 \times 4.0\% + 0.27 \times 3.66\% = 7.57\%
$$

**WACC计算（净债务法）**：

由于股权权重大于100%、债务权重为负：

$$
\begin{aligned}
WACC_{USD} &= 7.57\% \times \frac{12,729}{12,729 - 1,422} + 4.82\% \times \frac{-1,422}{12,729 - 1,422} \\
&= 7.57\% \times 1.1257 + 4.82\% \times (-0.1257) \\
&= \textbf{7.91\%}
\end{aligned}
$$

**两种方法的对比**：

| 方法 | WACC | 说明 |
|------|------|------|
| 总债务法 | 9.48% | 加回现金到公司价值 |
| 净债务法 | 7.91% | 不加回现金 |

两种方法得到的WACC差异不大（约1.5个百分点），这是因为净债务法将债务的税盾效益与现金利息收入的税负相互抵消。只要在整个估值过程中保持一致，两种方法最终得到的股权价值应该接近。

::: {.callout-tip}
## 实务选择

- **默认选择**：总债务法——更直观、更安全
- **考虑净债务法的情况**：公司习惯性持有大量现金作为运营常态（如某些科技公司）
- **关键原则**：无论选择哪种方法，必须**全程一致**
:::

## 业界最佳实践

学术界热衷于争论各种模型的优劣，但实务界是怎么做的？Bruner 等人（1998）对 27 家大型上市公司的 CFO 进行了调查，了解他们估算资本成本的实际做法。结果颇有启发意义。

### 调查结果概览

**表：资本成本估算的业界实践（Bruner et al. 1998）**

| 项目 | 主流做法 | 比例 |
|------|----------|------|
| **股权成本模型** | CAPM | 81% |
| | 修正CAPM | 4% |
| | 不确定/其他 | 15% |
| **无风险利率** | 10年期或更长国债 | 70% |
| | 3-5年期国债 | 7% |
| | 短期国库券 | 4% |
| | 不确定 | 19% |
| **Beta 来源** | 发布的服务商Beta | 52% |
| | 自行估算 | 30% |
| | 不确定 | 19% |
| **市场风险溢价** | 5-6% | 37% |
| | 其他数值 | 37% |
| | 不确定 | 26% |
| **债务成本** | 边际借款利率 + 边际税率 | 52% |
| | 平均借款利率 + 有效税率 | 37% |
| | 其他 | 11% |
| **权重** | 市场价值权重 | 59% |
| | 账面价值权重 | 15% |
| | 目标资本结构 | 7% |
| | 不确定 | 19% |

### 关键发现

这份调查揭示了几个有趣的现象：

**CAPM 占据主导地位**。尽管学术界不断批评 CAPM 的局限性，提出各种多因子模型，但实务界仍然以压倒性优势（81%）选择使用 CAPM。原因很简单：CAPM 简单、直观、容易解释，而且"已经够好了"。

**长期国债是首选**。70% 的公司使用 10 年期或更长期国债作为无风险利率，这与 Damodaran 的建议一致——无风险利率应该与现金流的久期相匹配，而估值通常是长期视角。

**Beta 来源偏向外部**。超过一半的公司直接使用服务商（Bloomberg、Value Line 等）发布的 Beta，而不是自己估算。这反映了实务中对便利性的偏好，但正如我们前面讨论的，这种做法并非没有问题。

**市场价值权重是主流**。59% 的公司使用市场价值权重，符合理论要求。但仍有 15% 使用账面价值权重，这在理论上是有问题的。

::: {.callout-warning}
## 实践与理论的差距

调查显示，即使是"最佳实践"公司，也存在一些与理论不符的做法：

- 15% 使用账面价值权重（而非市场价值）
- 37% 使用平均借款利率和有效税率（而非边际值）
- 相当比例对关键参数表示"不确定"

这提醒我们：实务中的"合理做法"未必符合理论最优。但这也说明，估值中存在相当大的判断空间。
:::

::: {.callout-tip}
## 实务启示

1. **不必追求完美**：如果 81% 的 CFO 都用 CAPM，你用 CAPM 也不会错得离谱
2. **保持一致性**：比选择哪个模型更重要的是，整个估值过程保持方法论的一致性
3. **记录假设**：无论做出什么选择，都要清楚记录并能够解释
4. **关注敏感性**：对关键假设（如风险溢价）做敏感性分析，了解估值对参数的敏感程度
:::

## 本章总结

本章介绍了从风险参数到资本成本的完整计算流程：

1. **Beta估算**有三种方法：回归法、基本面法（自下而上）、会计Beta。Damodaran强烈推荐**自下而上法**，因为它更精确、更灵活

2. **Beta的三个决定因素**：业务类型（周期性）、经营杠杆（固定成本占比）、财务杠杆（负债率）

3. **无杠杆Beta与有杠杆Beta**的转换公式：$\beta_L = \beta_U \times [1 + (1-t)(D/E)]$

4. **债务成本**基于违约风险，可以通过信用评级或合成评级（利息覆盖率）来估算

5. **WACC**是股权成本和税后债务成本的加权平均，权重必须基于**市场价值**

6. **债务**应该包括所有有息负债和资本化的经营租赁

## 思考题

::: {.callout-note}
## 问题1
为什么Damodaran不推荐使用回归Beta？在什么情况下回归Beta可能是可接受的？
:::

::: {.callout-note}
## 问题2
一家公司正在考虑增加负债来回购股票。假设这会使D/E比率从20%增加到50%，税率为25%，原来的无杠杆Beta为0.8。计算杠杆调整前后的股票Beta和股权成本（假设ERP=5.5%，Rf=4.5%）。
:::

::: {.callout-note}
## 问题3
为什么债务市场价值可能与账面价值不同？在什么情况下这种差异会特别大？
:::

::: {.callout-note}
## 问题4
一家持续亏损的公司，其WACC计算有什么特殊之处？提示：考虑利息抵税的问题。
:::

::: {.callout-note}
## 问题5
假设你要估算一家非上市公司的WACC。与上市公司相比，哪些步骤会更困难？你会如何处理这些挑战？
:::
